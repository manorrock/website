<!DOCTYPE html>

<html>
    <head>
        <title>JSF Tip #41 - How to enter and exit a flow</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link  href="../../../../manorrock.css" rel="stylesheet" type="text/css"/>
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r;
                i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
                a = s.createElement(o),
                        m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-10893862-1', 'auto');
            ga('send', 'pageview');

        </script>
    </head>
    <body>
        <h1>JSF Tip #41 - How to enter and exit a flow</h1>
        <p>
            In JSF 2.2 it is possible to define flows, one of the things you 
            would want to do is to be able to enter and to exit a flow. This 
            blog entry shows you a sample on how you can enter a flow and also 
            how to exit it properly.
        </p>
        <p>
            The page below uses a commandButton to enter the flow "enterexit"
        </p>
        <pre class="borderTopBottom">

    &lt;?xml version='1.0' encoding='UTF-8' ?>

    &lt;!DOCTYPE html>

    &lt;html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:f="http://java.sun.com/jsf/core">
        &lt;h:head>
            &lt;title>Enter and Exit Flow sample&lt;/title>
        &lt;/h:head>
        &lt;h:body>
            &lt;h1>Enter and Exit Flow sample&lt;/h1>
            &lt;h:form>
                &lt;h:commandButton action="enterexit" value="Enter"/>
            &lt;/h:form>
        &lt;/h:body>
    &lt;/html>
        </pre>
        <p>
            Now that we entered the flow we are going to define the exit point.
        </p>
        <pre class="borderTopBottom">
        
    &lt;faces-config version="2.2"
                  xmlns="http://xmlns.jcp.org/xml/ns/javaee"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                  xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee 
                    http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd">
        &lt;flow-definition id="enterexit">
            &lt;flow-return id="taskFlowReturn1">
                &lt;from-outcome>/exit&lt;/from-outcome>
            &lt;/flow-return>
        &lt;/flow-definition>
    &lt;/faces-config>
        </pre>
        <p>
            We have defined the exit point so now we are going to show you the
            page that allows you to exit the flow
        </p>
        <pre class="borderTopBottom">

    &lt;?xml version='1.0' encoding='UTF-8' ?>

    &lt;!DOCTYPE html>

    &lt;html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:f="http://java.sun.com/jsf/core">
        &lt;h:head>
            &lt;title>Enter and Exit Flow sample&lt;/title>
        &lt;/h:head>
        &lt;h:body>
            &lt;h1>Entered flow
            &lt;h:form>
                &lt;h:commandButton action="taskFlowReturn1" value="Exit"/>
            &lt;/h:form>
        &lt;/h:body>
    &lt;/html>
        </pre>
        <p>
            And lets verify we actually exited the flow
        </p>
        <pre class="borderTopBottom">

    &lt;?xml version='1.0' encoding='UTF-8' ?>

    &lt;!DOCTYPE html>

    &lt;html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:f="http://java.sun.com/jsf/core">
        &lt;h:head>
            &lt;title>Enter and Exit Flow sample&lt;/title>
        &lt;/h:head>
        &lt;h:body>
            &lt;h1>Enter and Exit Flow sample&lt;/h1>
            &lt;p>
                We exited the flow.
            &lt;/p>
            &lt;p>
                Do you want to &lt;a href="#{facesContext.externalContext.requestContextPath}/faces/index.xhtml">Start over&lt;/a>
            &lt;/p>
        &lt;/h:body>
    &lt;/html>
        </pre>
        <p>
            Posted November 18, 2013
        </p>
        <p>
            <a href="../../../index.html">Up</a>
        </p>
    </body>
</html>
